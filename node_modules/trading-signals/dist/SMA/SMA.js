"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FasterSMA = exports.SMA = void 0;
const __1 = require("..");
const MovingAverage_1 = require("../MA/MovingAverage");
class SMA extends MovingAverage_1.MovingAverage {
    constructor() {
        super(...arguments);
        this.prices = [];
    }
    update(price) {
        this.prices.push(price);
        if (this.prices.length > this.interval) {
            this.prices.shift();
        }
        if (this.prices.length === this.interval) {
            return this.setResult(SMA.getResultFromBatch(this.prices));
        }
    }
    static getResultFromBatch(prices) {
        const sum = prices.reduce((a, b) => a.plus(b), new __1.Big('0'));
        return sum.div(prices.length || 1);
    }
}
exports.SMA = SMA;
class FasterSMA extends MovingAverage_1.FasterMovingAverage {
    constructor() {
        super(...arguments);
        this.prices = [];
    }
    update(price) {
        this.prices.push(price);
        if (this.prices.length > this.interval) {
            this.prices.shift();
        }
        if (this.prices.length === this.interval) {
            const sum = this.prices.reduce((a, b) => a + b, 0);
            return this.setResult(sum / this.prices.length);
        }
    }
}
exports.FasterSMA = FasterSMA;
//# sourceMappingURL=SMA.js.map